# Grafana数据多轮对话分析 - 使用指南

这个文档展示了如何使用Grafana MCP分析器进行多轮对话分析，重点验证系统的多轮对话能力和复杂场景处理能力。基于四个真实数据源，涵盖金融数据分析和系统CPU性能分析两大方向。

## 真实数据源

### 金融数据分析：

1. **candlestickPriceOnlyHollowCandles**: 狗狗币K线图（空心蜡烛图）


[image](docs/candlestickPriceOnlyHollowCandles.png)

地址：https://play.grafana.org/d/candlestick/candlestick?orgId=1&from=2021-07-13T22:13:30.740Z&to=2021-07-13T22:46:18.921Z&timezone=utc&viewPanel=panel-7

2. **candlestickPriceAndVolume**: 狗狗币K线图（价格+成交量）

[image](docs/candlestickPriceAndVolume.png)

地址：https://play.grafana.org/d/candlestick/candlestick?orgId=1&from=2021-07-13T22:13:30.740Z&to=2021-07-13T22:46:18.921Z&timezone=utc&viewPanel=panel-2

### 系统性能分析

1. **overall_cpu_utilization**: CPU使用率历史趋势分析

[image](docs/overallCPUUtilization.png)

地址：https://play.grafana.org/d/cNMLIAFK/cpu-utilization-details-cores?var-interval=$__auto&orgId=1&from=now-3h&to=now&timezone=browser&var-host=faro-shop-control-plane&var-cpu=$__all&viewPanel=panel-22

2. **current_cpu_core_utilization**: CPU核心使用率实时状态

[image](docs/currentCPUCore.png)

地址：https://play.grafana.org/d/cNMLIAFK/cpu-utilization-details-cores?var-interval=$__auto&orgId=1&from=now-3h&to=now&timezone=browser&var-host=faro-shop-control-plane&var-cpu=$__all&viewPanel=panel-78

## 金融数据分析场景

### 场景1：candlestickPriceOnlyHollowCandles深度分析多轮对话
**测试步骤**：
1. 输入：`帮我获取candlestickPriceOnlyHollowCandles的数据`
2. 验证：AI获取K线图数据但不立即分析
3. 输入：`现在分析一下这个K线数据的趋势`
4. 验证：AI基于已获取的OHLC数据进行分析
5. 输入：`这个分析不够深入，再详细分析一下支撑位和阻力位`
6. 验证：AI在已有数据基础上深入分析技术指标
7. 输入：`识别关键价格水平`
8. 验证：AI识别关键价格水平
9. 输入：`这个价格模式有什么特点？`
10. 验证：AI分析价格模式特征
11. 输入：`如果这个趋势持续，会有什么影响？`
12. 验证：AI预测趋势影响
13. 输入：`有什么投资建议？`
14. 验证：AI提供投资建议

### 场景2：candlestickPriceAndVolume技术指标分析多轮对话
**测试步骤**：
1. 输入：`分析candlestickPriceAndVolume的成交量特征`
2. 验证：AI获取价格+成交量数据
3. 输入：`这个成交量与价格的关系怎么样？`
4. 验证：AI分析价量关系
5. 输入：`布林带指标显示什么信号？`
6. 验证：AI解读布林带形态和突破信号
7. 输入：`基于这些指标，市场情绪如何？`
8. 验证：AI评估市场情绪状态
9. 输入：`简单移动平均线显示什么趋势？`
10. 验证：AI分析SMA均线趋势
11. 输入：`这些技术指标综合起来看怎么样？`
12. 验证：AI综合多个技术指标进行分析
13. 输入：`有什么交易机会？`
14. 验证：AI提供交易机会分析

### 场景3：金融数据聚合分析多轮对话
**测试步骤**：
1. 输入：`分析candlestickPriceOnlyHollowCandles的技术指标`
2. 验证：AI获取并分析第一个数据源
3. 输入：`现在分析candlestickPriceAndVolume数据`
4. 验证：AI切换到第二个数据源
5. 输入：`对比两个数据源的技术指标差异`
6. 验证：AI对比两个数据源的技术指标
7. 输入：`两个数据源的数据有关系吗？`
8. 验证：AI关联分析两个数据源数据
9. 输入：`哪个数据源的分析更准确？`
10. 验证：AI基于对比结果判断数据质量
11. 输入：`基于两个数据源，给出综合投资建议`
12. 验证：AI提供综合投资建议
13. 输入：`有什么风险需要关注？`
14. 验证：AI从多维度评估风险

## 🔧 系统CPU性能分析场景

### 场景4：overall_cpu_utilization历史趋势分析多轮对话
**测试步骤**：
1. 输入：`分析overall_cpu_utilization的历史趋势`
2. 验证：AI获取CPU使用率历史数据
3. 输入：`CPU使用率的变化趋势如何？`
4. 验证：AI识别CPU使用率变化趋势
5. 输入：`user模式和system模式哪个更异常？`
6. 验证：AI分析不同CPU模式的使用情况
7. 输入：`这个峰值是什么时候出现的？`
8. 验证：AI识别CPU峰值时间
9. 输入：`如果CPU使用率继续这么高，会有什么影响？`
10. 验证：AI预测系统影响
11. 输入：`有什么性能优化建议？`
12. 验证：AI提供性能优化建议
13. 输入：`需要扩容吗？扩容的成本是多少？`
14. 验证：AI提供扩容建议和成本评估

### 场景5：current_cpu_core_utilization实时状态分析多轮对话
**测试步骤**：
1. 输入：`分析current_cpu_core_utilization的实时状态`
2. 验证：AI获取当前CPU核心使用率数据
3. 输入：`现在CPU使用率是多少？`
4. 验证：AI提供当前CPU使用率数值
5. 输入：`这个使用率正常吗？`
6. 验证：AI评估CPU使用率健康状态
7. 输入：`有没有性能瓶颈？`
8. 验证：AI分析是否存在性能瓶颈
9. 输入：`平均使用率和最大使用率差距大吗？`
10. 验证：AI分析CPU使用率分布情况
11. 输入：`需要扩容吗？`
12. 验证：AI提供扩容建议
13. 输入：`有什么立即可行的优化措施？`
14. 验证：AI提供即时优化措施

### 场景6：系统CPU性能聚合分析多轮对话
**测试步骤**：
1. 输入：`分析overall_cpu_utilization的历史趋势`
2. 验证：AI获取CPU历史趋势数据
3. 输入：`现在分析current_cpu_core_utilization的实时状态`
4. 验证：AI切换到CPU实时状态数据
5. 输入：`历史趋势和实时状态有什么不同？`
6. 验证：AI对比历史趋势和实时状态
7. 输入：`当前状态在历史中算什么水平？`
8. 验证：AI分析当前状态在历史中的位置
9. 输入：`基于历史数据，这个状态会持续多久？`
10. 验证：AI基于历史趋势预测当前状态持续时间
11. 输入：`系统整体健康状况如何？`
12. 验证：AI综合评估系统健康状况
13. 输入：`有什么维护建议？`
14. 验证：AI提供维护建议

## 🔗 跨领域综合分析场景

### 场景7：金融与系统性能关联分析多轮对话
**测试步骤**：
1. 输入：`分析candlestickPriceAndVolume的成交量特征`
2. 验证：AI获取金融数据
3. 输入：`现在分析overall_cpu_utilization的历史趋势`
4. 验证：AI获取系统性能数据
5. 输入：`这两个数据源有什么关联？`
6. 验证：AI发现数据间的关联性
7. 输入：`如果CPU使用率高，会影响交易吗？`
8. 验证：AI分析系统性能对交易的影响
9. 输入：`基于这些数据，系统运行状况如何？`
10. 验证：AI综合评估系统状况
11. 输入：`有什么风险需要关注？`
12. 验证：AI从多维度评估风险
13. 输入：`基于所有数据，给出综合建议`
14. 验证：AI提供综合建议

### 场景8：复杂需求理解与多轮深入分析
**测试步骤**：
1. 输入：`帮我看看candlestickPriceOnlyHollowCandles的整体市场状况，重点关注价格趋势和成交量变化`
2. 验证：AI理解复杂需求，获取并分析OHLC数据
3. 输入：`这个市场看起来有点波动，你觉得呢？`
4. 验证：AI基于数据判断市场状态
5. 输入：`如果我想投资，应该关注哪些指标？`
6. 验证：AI提供基于数据的投资建议
7. 输入：`现在分析一下系统性能对投资的影响`
8. 验证：AI获取系统性能数据
9. 输入：`系统性能会影响交易决策吗？`
10. 验证：AI分析系统性能对交易决策的影响
11. 输入：`基于金融数据和系统性能，给出投资建议`
12. 验证：AI提供综合投资建议
13. 输入：`有什么风险需要控制？`
14. 验证：AI提供风险控制建议

## 测试结果记录

| 场景类别 | 场景 | 对话轮数 | 数据源使用 | 上下文保持 | 聚合分析 | 备注 |
|----------|------|----------|------------|------------|----------|------|
| 金融数据分析 | 场景1：candlestickPriceOnlyHollowCandles深度分析 | 14轮 | 1个 | ✅ | ❌ | 验证单个数据源深度分析 |
| 金融数据分析 | 场景2：candlestickPriceAndVolume技术指标分析 | 14轮 | 1个 | ✅ | ❌ | 验证技术指标综合分析 |
| 金融数据分析 | 场景3：金融数据聚合分析 | 14轮 | 2个 | ✅ | ✅ | 验证金融数据聚合分析 |
| 系统CPU分析 | 场景4：overall_cpu_utilization历史趋势分析 | 14轮 | 1个 | ✅ | ❌ | 验证CPU历史趋势分析 |
| 系统CPU分析 | 场景5：current_cpu_core_utilization实时状态分析 | 14轮 | 1个 | ✅ | ❌ | 验证CPU实时状态分析 |
| 系统CPU分析 | 场景6：系统CPU性能聚合分析 | 14轮 | 2个 | ✅ | ✅ | 验证CPU数据聚合分析 |
| 跨领域分析 | 场景7：金融与系统性能关联分析 | 14轮 | 2个 | ✅ | ✅ | 验证跨领域关联分析 |
| 跨领域分析 | 场景8：复杂需求理解与多轮深入分析 | 14轮 | 2个 | ✅ | ✅ | 验证复杂需求理解 |

## 验证要点

- **上下文保持**: 对话过程中能正确理解"这个"、"那个"等指代词
- **数据复用**: 避免重复获取相同数据，有效使用缓存
- **逻辑连贯**: 多轮对话逻辑清晰，分析逐步深入
- **多数据源管理**: 能同时管理多个数据源，正确切换
- **数据关联**: 能关联分析不同数据源的数据
- **复杂需求理解**: 能理解复杂的自然语言需求
- **渐进式分析**: 从基础分析逐步深入到专业分析
- **预测分析**: 能基于数据预测趋势和影响

## 使用技巧

- **明确需求**: 在每轮对话中明确表达分析需求
- **逐步深入**: 从基础分析逐步深入到专业分析
- **首次查询**: 明确指定数据源名称
- **后续分析**: 可以使用"这个"、"那个"等指代词
- **数据切换**: 明确说明要切换到哪个数据源

---

*本指南充分利用四个真实数据源，通过8个复杂场景全面测试系统的对话理解、数据管理和智能分析能力，涵盖单个分析和聚合分析。* 